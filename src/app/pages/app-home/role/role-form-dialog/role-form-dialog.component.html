<section class="form-dialog" [formGroup]="roleForm">
    <h1 mat-dialog-title>{{ isEditMode ? 'Update Role' : 'Create Role' }}</h1>

    <div mat-dialog-content>

        <mat-form-field appearance="outline" class="w-100">
            <mat-label>Role Name</mat-label>
            <input matInput formControlName="roleName" placeholder="Enter role name" />
        </mat-form-field>

        <div formArrayName="moduleAccessList">
            <div *ngFor="let moduleAccess of moduleAccessList.controls; let i = index" [formGroupName]="i" class="row">
                <div class="col-11 row">
                    <mat-form-field appearance="outline" class="w-50">
                        <mat-label>Module Name</mat-label>
                        <mat-select formControlName="moduleName">
                            <mat-option *ngFor="let module of moduleOptions" [value]="module"
                                [disabled]="isModuleSelected(module, i)">
                                {{ module }}
                            </mat-option>
                        </mat-select>

                    </mat-form-field>
                    <mat-form-field appearance="outline" class="w-50">
                        <mat-label>Access Type</mat-label>
                        <mat-select formControlName="accessType">
                            <mat-option *ngFor="let type of accessTypes" [value]="type">{{ type }}</mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>
                <div class="col-1 d-flex mt-3">
                    <div class="pe-2 cursor-pointer remove-icon" *ngIf="moduleAccessList.length > 1"
                        (click)="removeModuleAccess(i)">
                        <mat-icon>remove_circle_outline</mat-icon>
                    </div>
                    <div class="cursor-pointer add-icon" (click)="addModuleAccess()"
                        *ngIf="moduleAccessList.length === i + 1 && !isAddDisabled() && moduleAccessList.length < 9">
                        <mat-icon>add_circle_outline</mat-icon>
                    </div>
                </div>

            </div>
        </div>
        <mat-form-field appearance="outline" class="w-100">
            <mat-label>Description</mat-label>
            <textarea matInput formControlName="description" placeholder="Enter description"></textarea>
        </mat-form-field>

    </div>

    <div mat-dialog-actions align="end">
        <button mat-button mat-dialog-close class="">Cancel</button>
        <button mat-flat-button color="primary" (click)="onSubmit()" [disabled]="!roleForm.valid ">
            {{ isEditMode ? 'Update' : 'Submit' }}
        </button>
    </div>
</section>