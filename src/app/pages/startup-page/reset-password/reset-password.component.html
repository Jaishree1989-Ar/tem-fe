<div class="reset-password startup-page">
  <div class="change-card row align-items-center glassEffect">
    <div class="col-12 col-md-6 text-center mb-4">
      <img class="img-fluid mb-3" src="assets/logo/logo-sticky.png" alt="Logo" style="max-width: 180px;" />
      <h2>{{resetPasswordConstants.RESET_PASSWORD_TITLE}}</h2>
      <p class="px-3 px-md-5">{{resetPasswordConstants.RESET_PASSWORD_DESCRIPTION}}</p>
    </div>

    <div class="col-12 col-md-6">
      <form [formGroup]="changePasswordForm" class="w-100 px-2">
        <!-- Temporary Password Field -->
        <mat-form-field appearance="fill" class="w-100">
          <input matInput [type]="hideTem ? 'password' : 'text'" 
                 formControlName="temporaryPassword" 
                 required
                 placeholder="Temporary Password" />
          <mat-icon matPrefix>lock</mat-icon>
          <button mat-icon-button matSuffix (click)="hideTem = !hideTem" type="button">
            <mat-icon>{{ hideTem ? 'visibility_off' : 'visibility' }}</mat-icon>
          </button>
          <mat-error *ngIf="changePasswordForm.get('temporaryPassword')?.hasError('required')">
            Temporary password is required
          </mat-error>
        </mat-form-field>

        <!-- New Password Field -->
        <mat-form-field appearance="fill" class="w-100">
          <input matInput [type]="hideNew ? 'password' : 'text'" 
                 formControlName="newPassword" 
                 required
                 placeholder="New Password" />
          <mat-icon matPrefix>lock</mat-icon>
          <button mat-icon-button matSuffix (click)="hideNew = !hideNew" type="button">
            <mat-icon>{{ hideNew ? 'visibility_off' : 'visibility' }}</mat-icon>
          </button>
          <mat-error *ngIf="changePasswordForm.get('newPassword')?.hasError('required')">
            New password is required
          </mat-error>
          <mat-error *ngIf="changePasswordForm.get('newPassword')?.hasError('minlength')">
            Password must be at least 6 characters long
          </mat-error>
          <mat-error *ngIf="newPasswordSameAsTemporary()">
            New password must be different from temporary password
          </mat-error>
        </mat-form-field>

        <!-- Confirm Password Field -->
        <mat-form-field appearance="fill" class="w-100">
          <input matInput [type]="hideConfirm ? 'password' : 'text'" 
                 formControlName="confirmPassword" 
                 required
                 placeholder="Confirm Password" />
          <mat-icon matPrefix>lock</mat-icon>
          <button mat-icon-button matSuffix (click)="hideConfirm = !hideConfirm" type="button">
            <mat-icon>{{ hideConfirm ? 'visibility_off' : 'visibility' }}</mat-icon>
          </button>
          <mat-error *ngIf="changePasswordForm.get('confirmPassword')?.hasError('required')">
            Confirmation is required
          </mat-error>
          <mat-error *ngIf="changePasswordForm.get('confirmPassword')?.hasError('minlength')">
            Confirmation must be at least 6 characters long
          </mat-error>
          <mat-error *ngIf="passwordsDoNotMatch()">
            Passwords do not match
          </mat-error>
        </mat-form-field>

        <!-- Submit Button -->
        <div class="text-center">
          <button mat-raised-button 
                  class="w-100 login-btn" 
                  color="accent" 
                  [disabled]="isLoading"
                  (click)="changePassword()">
            <mat-spinner *ngIf="isLoading" diameter="20" class="me-2"></mat-spinner>
            {{resetPasswordConstants.RESET_PASSWORD_BUTTON}}
          </button>
        </div>

        <!-- Navigation Links -->
        <!-- <div class="text-center mt-3">
          <span class="back-to-login cursor-pointer fmedium me-3" (click)="backToLogin()">
            Back to Login
          </span>
          <span class="back-to-forgot cursor-pointer fmedium" (click)="backToForgotPassword()">
            Back to Forgot Password
          </span>
        </div> -->
      </form>
    </div>
  </div>
</div>